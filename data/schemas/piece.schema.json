{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Crochet Item",
  "description": "A finished handcrafted crochet piece",
  "type": "object",
  "required": ["id", "name", "type", "dimensions", "date_started", "status", "yarns_used", "stitches_used"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^ITEM-[0-9]{3}$",
      "description": "Unique identifier (e.g., ITEM-001)"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "description": "Item name"
    },
    "type": {
      "type": "string",
      "enum": ["shawl", "scarf", "bed_throw", "blanket", "cowl", "poncho", "cardigan", "hat", "bag", "home_decor", "other"],
      "description": "Type of crochet item"
    },
    "dimensions": {
      "type": "object",
      "required": ["width_cm", "length_cm"],
      "properties": {
        "width_cm": { "type": "number", "minimum": 0 },
        "length_cm": { "type": "number", "minimum": 0 },
        "depth_cm": { "type": "number", "minimum": 0 }
      }
    },
    "date_started": {
      "type": "string",
      "format": "date",
      "description": "Date work began (YYYY-MM-DD)"
    },
    "date_finished": {
      "type": "string",
      "format": "date",
      "description": "Date completed (YYYY-MM-DD)"
    },
    "work_hours": {
      "type": "number",
      "minimum": 0,
      "description": "Approximate total hours worked"
    },
    "photos": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of photo filenames"
    },
    "price": {
      "type": "number",
      "minimum": 0,
      "description": "Price to sell (EUR)"
    },
    "status": {
      "type": "string",
      "enum": ["in_progress", "available", "sold", "gifted", "keeping"],
      "description": "Current status of the item"
    },
    "gift_recipient": {
      "type": "string",
      "description": "If gifted, to whom"
    },
    "sale_platform": {
      "type": "string",
      "description": "Where listed for sale"
    },
    "sale_link": {
      "type": "string",
      "format": "uri",
      "description": "URL if listed online"
    },
    "sold_date": {
      "type": "string",
      "format": "date",
      "description": "Date sold"
    },
    "sold_price": {
      "type": "number",
      "minimum": 0,
      "description": "Actual sale price (EUR)"
    },
    "yarns_used": {
      "type": "array",
      "items": { "type": "string", "pattern": "^YARN-[0-9]{3}$" },
      "minItems": 1,
      "description": "List of yarn IDs used"
    },
    "stitches_used": {
      "type": "array",
      "items": { "type": "string", "pattern": "^STITCH-[0-9]{3}$" },
      "minItems": 1,
      "description": "List of stitch IDs used"
    },
    "notes": {
      "type": "string",
      "description": "Additional notes"
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    }
  }
}
